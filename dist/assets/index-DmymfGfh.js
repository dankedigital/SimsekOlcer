(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const y=.3,p=500,f=document.getElementById("startButton"),o=document.getElementById("status"),h=document.getElementById("meterValue"),c=new Audio("http://www.mertsabuncu.com/wp-content/uploads/2024/12/Applause-Crowd-Cheering-sound-effect.mp3");let d,a,s,l=!1;window.AudioContext=window.AudioContext||window.webkitAudioContext;async function w(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Tarayıcınız mikrofon erişimini desteklemiyor.");const t={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}},i=await navigator.mediaDevices.getUserMedia(t);d=new AudioContext;const r=d.createMediaStreamSource(i);a=d.createAnalyser(),a.fftSize=2048,s=new Float32Array(a.frequencyBinCount),r.connect(a),l=!0,f.disabled=!0,o.textContent="Dinleniyor...",o.className="status listening",g();try{await c.play(),c.pause(),c.currentTime=0}catch(u){console.log("Test sesi çalınamadı:",u)}}catch(t){console.error("Mikrofon erişimi hatası:",t),o.textContent="Mikrofon erişimi reddedildi veya bir hata oluştu!",o.className="status detected",f.disabled=!1}}function g(){if(!l)return;a.getFloatTimeDomainData(s);let t=0;for(let r=0;r<s.length;r++)t+=s[r]*s[r];t=Math.sqrt(t/s.length);const i=Math.min(t*300,100);h.style.width=`${i}%`,t>y&&C(),requestAnimationFrame(g)}function C(){l&&(l=!1,o.textContent="Şimşek Algılandı!",o.className="status detected",c.currentTime=0,c.play().catch(t=>console.log("Uyarı sesi çalınamadı:",t)),setTimeout(()=>{d.state==="running"&&(l=!0,o.textContent="Dinleniyor...",o.className="status listening")},p))}f.addEventListener("click",w);
